{
  "filename": "quick-start.md",
  "__html": "<h1>Quick start</h1>\n<p>Let's take you to the Dubbo-go framework through a <code>hellowworld</code> example.</p>\n<p>protocal: Dubbo<br>\ncoding: Hessian2<br>\nregistry: Zookeeper</p>\n<h2>Environment</h2>\n<ul>\n<li>Go programming environment</li>\n<li>Start zookeeper server, or use a remote instance of zookeeper</li>\n</ul>\n<h2>Start from the server</h2>\n<h3>Step 1: coding the <code>Provider</code> struct and methods to provide service</h3>\n<blockquote>\n<p><a href=\"https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/app/user.go\">https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/app/user.go</a></p>\n</blockquote>\n<ol>\n<li>Coding the structure to be encoded, because <code>Hessian2</code> is used as the encoding protocol, <code>User</code> needs to implement the <code>JavaClassName</code> method, and its return value corresponds to the class name of User class in Dubbo.</li>\n</ol>\n<pre><code class=\"language-go\"><span class=\"hljs-keyword\">type</span> User <span class=\"hljs-keyword\">struct</span> {\n\tId   <span class=\"hljs-keyword\">string</span>\n\tName <span class=\"hljs-keyword\">string</span>\n\tAge  <span class=\"hljs-keyword\">int32</span>\n\tTime time.Time\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(u User)</span> <span class=\"hljs-title\">JavaClassName</span><span class=\"hljs-params\">()</span> <span class=\"hljs-title\">string</span></span> {\n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">\"com.ikurento.user.User\"</span>\n}\n</code></pre>\n<ol start=\"2\">\n<li>Coding the business logic, and <code>UserProvider</code> is equivalent to one of implementations of one service in Dubbo. It needs implement the <code>Reference</code> method whose return value is unique identification of this service, and return value corresponds to the <code>beans</code> and <code>path</code> fields of Dubbo.</li>\n</ol>\n<pre><code class=\"language-go\"><span class=\"hljs-keyword\">type</span> UserProvider <span class=\"hljs-keyword\">struct</span> {\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(u *UserProvider)</span> <span class=\"hljs-title\">GetUser</span><span class=\"hljs-params\">(ctx context.Context, req []<span class=\"hljs-keyword\">interface</span>{})</span> <span class=\"hljs-params\">(*User, error)</span></span> {\n\t<span class=\"hljs-built_in\">println</span>(<span class=\"hljs-string\">\"req:%#v\"</span>, req)\n\trsp := User{<span class=\"hljs-string\">\"A001\"</span>, <span class=\"hljs-string\">\"hellowworld\"</span>, <span class=\"hljs-number\">18</span>, time.Now()}\n\t<span class=\"hljs-built_in\">println</span>(<span class=\"hljs-string\">\"rsp:%#v\"</span>, rsp)\n\t<span class=\"hljs-keyword\">return</span> &amp;rsp, <span class=\"hljs-literal\">nil</span>\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(u *UserProvider)</span> <span class=\"hljs-title\">Reference</span><span class=\"hljs-params\">()</span> <span class=\"hljs-title\">string</span></span> {\n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">\"UserProvider\"</span>\n}\n</code></pre>\n<ol start=\"3\">\n<li>Register services and objects</li>\n</ol>\n<pre><code class=\"language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">init</span><span class=\"hljs-params\">()</span></span> {\n\tconfig.SetProviderService(<span class=\"hljs-built_in\">new</span>(UserProvider))\n\t<span class=\"hljs-comment\">// ------for hessian2------</span>\n\thessian.RegisterPOJO(&amp;User{})\n}\n</code></pre>\n<h3>Step 2：Coding main program</h3>\n<blockquote>\n<p><a href=\"https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/app/server.go\">https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/app/server.go</a></p>\n</blockquote>\n<ol>\n<li>Import the required Dubbo-go package</li>\n</ol>\n<pre><code class=\"language-go\"><span class=\"hljs-keyword\">import</span> (\n\thessian <span class=\"hljs-string\">\"github.com/apache/dubbo-go-hessian2\"</span>\n\t<span class=\"hljs-string\">\"github.com/apache/dubbo-go/config\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/registry/protocol\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/common/proxy/proxy_factory\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/filter/impl\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/cluster/cluster_impl\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/cluster/loadbalance\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/registry/zookeeper\"</span>\n\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/protocol/dubbo\"</span>\n)\n\n</code></pre>\n<ol start=\"2\">\n<li>main method</li>\n</ol>\n<pre><code class=\"language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span> {\n\tconfig.Load()\n}\n</code></pre>\n<h3>Step 3：Coding configuration files and configure environment variables</h3>\n<ol>\n<li>Follow <a href=\"https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/profiles/release/log.yml\">log</a> and <a href=\"https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-server/profiles/release/server.yml\">server</a> to edit configuration files.</li>\n</ol>\n<p>Edit the following configurations:</p>\n<ul>\n<li>\n<p>The number and address of zk to be configured under the node <code>registries</code>.</p>\n</li>\n<li>\n<p>To configure the specific informations of the service under the node <code>services</code>, you need to configure the <code>interface</code> -- change it to the interface name of the corresponding service, and the key of service is return value of <code>Reference</code> method of <code>Provider</code> in Step 1.</p>\n</li>\n</ul>\n<ol start=\"2\">\n<li>Configure the above two configuration files as environment variables</li>\n</ol>\n<pre><code class=\"language-shell\">export CONF_PROVIDER_FILE_PATH=\"xxx\"\nexport APP_LOG_CONF_FILE=\"xxx\"\n</code></pre>\n<h2>The second is client</h2>\n<h3>Step 1：coding the <code>Provider</code> of client</h3>\n<blockquote>\n<p><a href=\"https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/app/user.go\">https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/app/user.go</a></p>\n</blockquote>\n<ol>\n<li>\n<p>Refer to the first point of step 1 in <code>Start from the server</code>.</p>\n</li>\n<li>\n<p>Different from the server, methods to provide services are the parameters of the structure, and they don't need to code some special business logic。In addition, <code>Provider</code> does not correspond to the interface in Dubbo, but to an implementation.</p>\n</li>\n</ol>\n<pre><code class=\"language-go\"><span class=\"hljs-keyword\">type</span> UserProvider <span class=\"hljs-keyword\">struct</span> {\n\tGetUser <span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span><span class=\"hljs-params\">(ctx context.Context, req []<span class=\"hljs-keyword\">interface</span>{}, rsp *User)</span> <span class=\"hljs-title\">error</span></span>\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(u *UserProvider)</span> <span class=\"hljs-title\">Reference</span><span class=\"hljs-params\">()</span> <span class=\"hljs-title\">string</span></span> {\n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">\"UserProvider\"</span>\n}\n</code></pre>\n<ol start=\"3\">\n<li>Register services and objects</li>\n</ol>\n<pre><code class=\"language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">init</span><span class=\"hljs-params\">()</span></span> {\n\tconfig.SetConsumerService(userProvider)\n\thessian.RegisterPOJO(&amp;User{})\n}\n</code></pre>\n<h3>Step 2：Coding main program of client</h3>\n<blockquote>\n<p><a href=\"https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/app/client.go\">https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/app/client.go</a></p>\n</blockquote>\n<ol>\n<li>Import the required Dubbo-go package</li>\n</ol>\n<pre><code class=\"language-go\"><span class=\"hljs-keyword\">import</span> (\n\thessian <span class=\"hljs-string\">\"github.com/apache/dubbo-go-hessian2\"</span>\n\t<span class=\"hljs-string\">\"github.com/apache/dubbo-go/config\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/registry/protocol\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/common/proxy/proxy_factory\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/filter/impl\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/cluster/cluster_impl\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/cluster/loadbalance\"</span>\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/registry/zookeeper\"</span>\n\n\t_ <span class=\"hljs-string\">\"github.com/apache/dubbo-go/protocol/dubbo\"</span>\n)\n</code></pre>\n<ol start=\"2\">\n<li>main method</li>\n</ol>\n<pre><code class=\"language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span> {\n\tconfig.Load()\n\ttime.Sleep(<span class=\"hljs-number\">3e9</span>)\n\n\t<span class=\"hljs-built_in\">println</span>(<span class=\"hljs-string\">\"\\n\\n\\nstart to test dubbo\"</span>)\n\tuser := &amp;User{}\n\terr := userProvider.GetUser(context.TODO(), []<span class=\"hljs-keyword\">interface</span>{}{<span class=\"hljs-string\">\"A001\"</span>}, user)\n\t<span class=\"hljs-keyword\">if</span> err != <span class=\"hljs-literal\">nil</span> {\n\t\t<span class=\"hljs-built_in\">panic</span>(err)\n\t}\n\t<span class=\"hljs-built_in\">println</span>(<span class=\"hljs-string\">\"response result: %v\\n\"</span>, user)\n}\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">println</span><span class=\"hljs-params\">(format <span class=\"hljs-keyword\">string</span>, args ...<span class=\"hljs-keyword\">interface</span>{})</span></span> {\n\tfmt.Printf(<span class=\"hljs-string\">\"\\033[32;40m\"</span>+format+<span class=\"hljs-string\">\"\\033[0m\\n\"</span>, args...)\n}\n</code></pre>\n<h3>Step 3：Coding configuration files and configure environment variables</h3>\n<ol>\n<li>Follow <a href=\"https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/profiles/release/log.yml\">log</a> and <a href=\"https://github.com/dubbogo/dubbo-samples/blob/master/golang/helloworld/dubbo/go-client/profiles/release/client.yml\">client</a> to edit configuration files.</li>\n</ol>\n<p>Edit the following configurations:</p>\n<ul>\n<li>\n<p>The number and address of zk to be configured under the node <code>registries</code>.</p>\n</li>\n<li>\n<p>To configure the specific informations of the service under the node <code>references</code>, you need to configure the <code>interface</code> -- change it to the interface name of the corresponding service, and the key of service is return value of <code>Reference</code> method of <code>Provider</code> in Step 1.</p>\n</li>\n</ul>\n<ol start=\"2\">\n<li>Configure the above two configuration files as environment variables, in order to prevent the conflict between the log environment variables client and server, it is recommended that all the environment variables should not be configured globally, which will take effect at present.</li>\n</ol>\n<pre><code class=\"language-shell\">export CONF_CONSUMER_FILE_PATH=\"xxx\"\nexport APP_LOG_CONF_FILE=\"xxx\"\n</code></pre>\n",
  "link": "/en-us/docs/user/quick-start.html",
  "meta": {
    "title": "Quick start",
    "keywords": "quick start, hellowworld, Provider",
    "description": "quickly start Dubbo-go and code a simple hellowworld application"
  }
}